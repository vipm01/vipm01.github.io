<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>安全访问中</title>

    <script>
        async function redirect() {
            const urlsFile = 'urls.json';
            const path = window.location.pathname.substring(1);
            const response = await fetch(urlsFile);
            const urls = await response.json();

            if (urls[path]) {
                window.location.href = urls[path];
            } else {
                document.body.innerHTML = '<h1>页面已失效</h1><p>请咨询群管理，或查看群文件获取 559812753</p>';
            }
        }

        function isWeChatOrQQ() {
            var ua = navigator.userAgent.toLowerCase();
            return ua.indexOf('micromessenger') !== -1 || ua.indexOf('qq') !== -1;
        }

        function showGuidancePage() {
            document.body.innerHTML = `
                <div class="top-bar-guidance">
                    <p>点击右上角<img src="https://images.cubox.pro/wraed6/file/2023082315084263467/3.jpg" class="icon-safari" /> <span id="openm">Safari打开</span></p>
                    <p>可以继续浏览本站哦~</p>
                </div>
                <div class="app-download-tip">
                    <span class="guidance-desc">您也可以复制本站网址，到其它浏览器打开</span>
                </div>
                <a class="app-download-btn" id="fz" onclick="fz()">点我复制网址</a>
                <a style="display: none;" href="#" id="dwz"></a>
                <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
                <script src="https://lib.baomitu.com/clipboard.js/2.0.6/clipboard.min.js"></script>
                <script>
                    var url = window.document.location.href.toString();
                    $(function() {
                        $("#fz").attr("data-clipboard-text", url);
                    });
                    new ClipboardJS("#fz");
                    function fz() {
                        $("#fz").text("复制成功");
                    }
                    // 自动化调用浏览器
                    var urlToOpen = window.location.href;
                    function openu(u) {
                        document.getElementById("dwz").href = u;
                        document.getElementById("dwz").click();
                    }
                    openu("ucbrowser://" + urlToOpen);
                    openu("mttbrowser://url=" + urlToOpen);
                    openu("baiduboxapp://browse?url=" + urlToOpen);
                    openu("googlechrome://" + urlToOpen);
                    openu("mibrowser:" + urlToOpen);
                </script>
            `;
        }

        window.onload = async function() {
            if (isWeChatOrQQ()) {
                showGuidancePage();
            } else {
                await redirect();
            }
        }
    </script>

    <style>
        body, html {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            text-align: center;
        }
        .top-bar-guidance {
            font-size: 15px;
            color: #fff;
            height: 70%;
            line-height: 1.8;
            padding-left: 20px;
            padding-top: 20px;
            background: url(https://images.cubox.pro/wraed6/file/2023082315075783686/1.jpg) center top/contain no-repeat;
        }
        .top-bar-guidance .icon-safari {
            width: 25px;
            height: 25px;
            vertical-align: middle;
            margin: 0 .2em;
        }
        .app-download-tip {
            margin: 0 auto;
            width: 290px;
            text-align: center;
            font-size: 15px;
            color: #2466f4;
            background: url(https://images.cubox.pro/wraed6/file/2023082315081955500/2.png) left center/auto 15px repeat-x;
        }
        .app-download-tip .guidance-desc {
            background-color: #fff;
            padding: 0 5px;
        }
        .app-download-btn {
            display: block;
            width: 214px;
            height: 40px;
            line-height: 40px;
            margin: 18px auto 0 auto;
            text-align: center;
            font-size: 18px;
            color: #2466f4;
            border-radius: 20px;
            border: .5px #2466f4 solid;
            text-decoration: none;
        }
    </style>
</head>
<body>
</body>
</html>
